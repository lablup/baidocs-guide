# ë²„ì „ ê´€ë¦¬ & ë¸Œëœì¹˜ ê´€ë¦¬

BaiDocsëŠ” Git ë¸Œëœì¹˜ í†µí•©ì„ í†µí•œ ê°•ë ¥í•œ ë²„ì „ ê´€ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ ë§¤ë„ëŸ¬ìš´ ì „í™˜, ë²„ì „ë³„ ì½˜í…ì¸ , ìë™í™”ëœ ë²„ì „ ê´€ë¦¬ì™€ í•¨ê»˜ ë¬¸ì„œì˜ ì—¬ëŸ¬ ë²„ì „ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ê°œìš”

### ë²„ì „ ê´€ë¦¬ ê¸°ëŠ¥

- **Git ë¸Œëœì¹˜ í†µí•©**: ê° ë¬¸ì„œ ë²„ì „ì´ Git ë¸Œëœì¹˜ì— ëŒ€ì‘
- **ìë™ ë²„ì „ ê°ì§€**: ì‚¬ìš© ê°€ëŠ¥í•œ ë²„ì „ ìë™ ê°ì§€ ë° ë‚˜ì—´
- **ë²„ì „ ì „í™˜**: ë‹¤ë¥¸ ë¬¸ì„œ ë²„ì „ ê°„ ë§¤ë„ëŸ¬ìš´ ì „í™˜
- **ë²„ì „ë³„ ì½˜í…ì¸ **: ë²„ì „ ê°„ ë‹¤ì–‘í•œ ì½˜í…ì¸ 
- **ë ˆê±°ì‹œ ì§€ì›**: ìƒˆë¡œìš´ ë²„ì „ ê°œë°œ ì¤‘ ì´ì „ ë²„ì „ ìœ ì§€
- **ë¦´ë¦¬ìŠ¤ ê´€ë¦¬**: ìë™í™”ëœ ë²„ì „ íƒœê¹… ë° ë¦´ë¦¬ìŠ¤ í”„ë¡œì„¸ìŠ¤
- **ë²„ì „ ë¹„êµ**: ë‹¤ë¥¸ ë²„ì „ ê°„ ì½˜í…ì¸  ë¹„êµ

### ì¼ë°˜ì ì¸ ë²„ì „ ê´€ë¦¬ ì‹œë‚˜ë¦¬ì˜¤

- **ì œí’ˆ ë¦´ë¦¬ìŠ¤**: v1.0, v2.0, v3.0ì— ëŒ€í•œ ë¬¸ì„œ ìœ ì§€
- **API ë²„ì „**: ë‹¤ë¥¸ API ë²„ì „ ë¬¸ì„œí™” (v1, v2, latest)
- **ê¸°ëŠ¥ ë¸Œëœì¹˜**: í–¥í›„ ê¸°ëŠ¥ì— ëŒ€í•œ ë¬¸ì„œ ë¯¸ë¦¬ë³´ê¸°
- **í™˜ê²½ë³„**: ìŠ¤í…Œì´ì§•, í”„ë¡œë•ì…˜ í™˜ê²½ì— ëŒ€í•œ ë‹¤ë¥¸ ë¬¸ì„œ
- **í˜„ì§€í™”ëœ ë²„ì „**: ì§€ì—­ ë˜ëŠ” ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ë³„ ë‹¤ë¥¸ ë²„ì „

## ë¸Œëœì¹˜ ê¸°ë°˜ ë²„ì „ ê´€ë¦¬

### ë²„ì „ ì„¤ì •

ì±… ì„¤ì •ì—ì„œ ë²„ì „ ê´€ë¦¬ë¥¼ êµ¬ì„±í•˜ì„¸ìš”:

```yaml
# book.config.yaml
id: my-documentation
title: ë‚´ ë¬¸ì„œ
description: ë‹¤ì¤‘ ë²„ì „ ë¬¸ì„œ

# Git ì„¤ì •
git:
  repository: "https://github.com/myorg/docs.git"
  branch: main  # ê¸°ë³¸ ë¸Œëœì¹˜

# ë²„ì „ ì„¤ì •
versioning:
  enabled: true
  strategy: "branch"  # ë˜ëŠ” "tag", "directory"

  # ë²„ì „ ë§¤í•‘
  versions:
    - branch: "main"
      version: "latest"
      label: "Latest (v3.0)"
      isDefault: true
      status: "active"

    - branch: "v2.x"
      version: "v2"
      label: "Version 2.x"
      status: "active"

    - branch: "v1.x"
      version: "v1"
      label: "Version 1.x"
      status: "maintenance"

    - branch: "develop"
      version: "beta"
      label: "Beta (v3.1)"
      status: "preview"

  # ë²„ì „ë³„ ì„¤ì •
  versionConfig:
    latest:
      supportStatus: "active"
      endOfLife: null
      releaseDate: "2024-01-26"

    v2:
      supportStatus: "maintenance"
      endOfLife: "2024-12-31"
      releaseDate: "2023-01-15"

    v1:
      supportStatus: "legacy"
      endOfLife: "2024-06-30"
      releaseDate: "2022-01-10"
```

### Git ë¸Œëœì¹˜ êµ¬ì¡°

ë²„ì „ ê´€ë¦¬ë¥¼ ìœ„í•œ Git ë¸Œëœì¹˜ êµ¬ì„±:

```
Git ì €ì¥ì†Œ êµ¬ì¡°:

main                    â† ìµœì‹  ì•ˆì • ë²„ì „ (v3.0)
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ book.config.yaml
â”‚   â”œâ”€â”€ en/
â”‚   â””â”€â”€ ko/

v2.x                    â† ë²„ì „ 2.x ìœ ì§€ë³´ìˆ˜
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ book.config.yaml  (ë²„ì „ë³„ ì„¤ì •)
â”‚   â”œâ”€â”€ en/
â”‚   â””â”€â”€ ko/

v1.x                    â† ë ˆê±°ì‹œ ë²„ì „ 1.x
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ book.config.yaml  (ì´ì „ ì„¤ì •)
â”‚   â”œâ”€â”€ en/
â”‚   â””â”€â”€ ko/

develop                 â† ê°œë°œ ë¸Œëœì¹˜ (v3.1 beta)
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ book.config.yaml
â”‚   â”œâ”€â”€ en/
â”‚   â””â”€â”€ ko/

feature/new-api         â† ê¸°ëŠ¥ ë¯¸ë¦¬ë³´ê¸°
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ book.config.yaml
â”‚   â”œâ”€â”€ en/
â”‚   â””â”€â”€ ko/
```

## ë²„ì „ ê´€ë¦¬

### ìƒˆ ë²„ì „ ìƒì„±

#### ë©”ì¸ì—ì„œ ë¦´ë¦¬ìŠ¤ ë²„ì „ ìƒì„±

ìƒˆë¡œìš´ ì•ˆì • ë²„ì „ ìƒì„±:

```bash
# ë©”ì¸ì—ì„œ ë²„ì „ ë¸Œëœì¹˜ ìƒì„±
git checkout main
git checkout -b v3.x

# ë²„ì „ ì„¤ì • ì—…ë°ì´íŠ¸
# book.config.yamlì„ í¸ì§‘í•˜ì—¬ ìƒˆ ë²„ì „ ë°˜ì˜

# ìƒˆ ë²„ì „ ë¸Œëœì¹˜ í‘¸ì‹œ
git push origin v3.x

# ë‹¤ìŒ ë²„ì „ì„ ìœ„í•´ ë©”ì¸ì—ì„œ ê°œë°œ ê³„ì†
git checkout main
# ë‹¤ìŒ ê°œë°œ ë²„ì „ì„ ë‚˜íƒ€ë‚´ë„ë¡ ë²„ì „ ì—…ë°ì´íŠ¸
```

#### ê¸°ëŠ¥ ë¸Œëœì¹˜ ë¯¸ë¦¬ë³´ê¸°

ìƒˆ ê¸°ëŠ¥ì— ëŒ€í•œ ë¯¸ë¦¬ë³´ê¸° ë²„ì „ ìƒì„±:

```bash
# ê¸°ëŠ¥ ë¸Œëœì¹˜ ìƒì„±
git checkout -b feature/new-authentication

# ë¯¸ë¦¬ë³´ê¸°ìš© book.config.yaml ì—…ë°ì´íŠ¸
git add content/book.config.yaml
git commit -m "ìƒˆ ì¸ì¦ì„ ìœ„í•œ ë¯¸ë¦¬ë³´ê¸° ë²„ì „ êµ¬ì„±"
git push origin feature/new-authentication
```

### ë²„ì „ë³„ ì„¤ì •

ê° ë²„ì „ì€ ìì²´ ì„¤ì •ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```yaml
# main ë¸Œëœì¹˜ - book.config.yaml
id: my-documentation
title: "ë‚´ ë¬¸ì„œ v3.0"
version: "3.0"

# ë²„ì „ë³„ ë©”íƒ€ë°ì´í„°
versionInfo:
  major: 3
  minor: 0
  patch: 0
  prerelease: null
  status: "stable"

# ë²„ì „ë³„ ë„¤ë¹„ê²Œì´ì…˜
navigation:
  en:
    - title: "í™ˆ"
      path: "index.mdx"
    - title: "ìƒˆ ê¸°ëŠ¥"  # v3.0ì—ì„œë§Œ
      path: "new-features.mdx"
    - title: "API ì°¸ì¡°"
      items:
        - title: "v3 API"      # ë²„ì „ë³„ API ë¬¸ì„œ
          path: "api/v3/index.mdx"
```

```yaml
# v2.x ë¸Œëœì¹˜ - book.config.yaml
id: my-documentation
title: "ë‚´ ë¬¸ì„œ v2.x"
version: "2.x"

versionInfo:
  major: 2
  minor: 8
  patch: 3
  prerelease: null
  status: "maintenance"

# v2.xìš© ë‹¤ë¥¸ ë„¤ë¹„ê²Œì´ì…˜
navigation:
  en:
    - title: "í™ˆ"
      path: "index.mdx"
    - title: "ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ"  # ì‚¬ìš©ìì˜ v3 ë§ˆì´ê·¸ë ˆì´ì…˜ ë„ì›€
      path: "migration-to-v3.mdx"
    - title: "API ì°¸ì¡°"
      items:
        - title: "v2 API"      # ë ˆê±°ì‹œ API ë¬¸ì„œ
          path: "api/v2/index.mdx"
```

## ë²„ì „ ì¸ì‹ ì½˜í…ì¸ 

### ì¡°ê±´ë¶€ ì½˜í…ì¸ 

ë²„ì „ì— ë”°ë¼ ì½˜í…ì¸  í‘œì‹œ:

```mdx
import { useVersion } from '@baidocs/versioning'

# API ì¸ì¦

ì¸ì¦ ë°©ë²•ì€ ë²„ì „ì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤:

<VersionContent version="3.x">

## OAuth 2.0 ì¸ì¦ (v3.0+)

ë²„ì „ 3.0ì€ í–¥ìƒëœ ë³´ì•ˆì„ ìœ„í•´ OAuth 2.0ì„ ë„ì…í•©ë‹ˆë‹¤:

```javascript
const auth = new OAuth2Client({
  clientId: 'your-client-id',
  redirectUri: 'https://your-app.com/callback'
});

await auth.authenticate();
```

</VersionContent>

<VersionContent version={["2.x", "1.x"]}>

## API í‚¤ ì¸ì¦ (v1.x - v2.x)

ë ˆê±°ì‹œ ë²„ì „ì€ API í‚¤ ì¸ì¦ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

```javascript
const client = new APIClient({
  apiKey: 'your-api-key'
});
```

:::warning ì‚¬ìš© ì¤‘ë‹¨ë¨
API í‚¤ ì¸ì¦ì€ v3.0ì—ì„œ ì‚¬ìš© ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. OAuth 2.0ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ì„¸ìš”.
:::

</VersionContent>

<VersionContent version="1.x">

## ê¸°ë³¸ ì¸ì¦ (v1.xë§Œ)

ë²„ì „ 1.xëŠ” ê¸°ë³¸ ì¸ì¦ë„ ì§€ì›í•©ë‹ˆë‹¤:

```javascript
const client = new APIClient({
  username: 'your-username',
  password: 'your-password'
});
```

:::danger ë³´ì•ˆ ì•Œë¦¼
ê¸°ë³¸ ì¸ì¦ì€ ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ v2.0+ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.
:::

</VersionContent>
```

### ë²„ì „ ë¹„êµ

ë²„ì „ ê°„ ê¸°ëŠ¥ ë¹„êµ:

```mdx
import { VersionTable, VersionCompare } from '@baidocs/components'

## ê¸°ëŠ¥ ë¹„êµ

<VersionTable>
| ê¸°ëŠ¥ | v1.x | v2.x | v3.x |
|------|------|------|------|
| ê¸°ë³¸ ì¸ì¦ | âœ… | âŒ | âŒ |
| API í‚¤ | âŒ | âœ… | âš ï¸ ì‚¬ìš© ì¤‘ë‹¨ë¨ |
| OAuth 2.0 | âŒ | âŒ | âœ… |
| ì†ë„ ì œí•œ | ê¸°ë³¸ | ê³ ê¸‰ | ìŠ¤ë§ˆíŠ¸ |
| WebSocket API | âŒ | âœ… | âœ… í–¥ìƒë¨ |
| GraphQL | âŒ | âŒ | âœ… |
</VersionTable>

<VersionCompare versions={['2.x', '3.x']}>

### v2.xì—ì„œ v3.xë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜

ì—…ê·¸ë ˆì´ë“œ ì‹œ ì£¼ìš” ë³€ê²½ì‚¬í•­:

#### í˜¸í™˜ì„± ì¤‘ë‹¨ ë³€ê²½ì‚¬í•­
- API í‚¤ ì¸ì¦ ì‚¬ìš© ì¤‘ë‹¨
- WebSocket í”„ë¡œí† ì½œ ì—…ë°ì´íŠ¸
- ì¼ë¶€ ì—”ë“œí¬ì¸íŠ¸ URL ë³€ê²½

#### ìƒˆ ê¸°ëŠ¥
- OAuth 2.0 ì¸ì¦
- GraphQL API
- í–¥ìƒëœ ì†ë„ ì œí•œ

</VersionCompare>
```

### ë²„ì „ë³„ ì–´ë“œëª¨ë‹ˆì…˜

ë²„ì „ ì¸ì‹ ì½œì•„ì›ƒ ìƒì„±:

```mdx
import { VersionAdmonition } from '@baidocs/components'

<VersionAdmonition type="added" version="3.0">
**v3.0ì˜ ìƒˆ ê¸°ëŠ¥:** OAuth 2.0 ì¸ì¦ì´ í–¥ìƒëœ ë³´ì•ˆê³¼ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.
</VersionAdmonition>

<VersionAdmonition type="changed" version="2.5">
**v2.5ì—ì„œ ë³€ê²½ë¨:** WebSocket ì—°ê²° ì²˜ë¦¬ê°€ ë” ë‚˜ì€ ì•ˆì •ì„±ì„ ìœ„í•´ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤.
</VersionAdmonition>

<VersionAdmonition type="deprecated" version="3.0" removeVersion="4.0">
**v3.0ì—ì„œ ì‚¬ìš© ì¤‘ë‹¨ë¨:** API í‚¤ ì¸ì¦ì€ v4.0ì—ì„œ ì œê±°ë  ì˜ˆì •ì…ë‹ˆë‹¤. OAuth 2.0ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ì„¸ìš”.
</VersionAdmonition>

<VersionAdmonition type="removed" version="2.0" previousVersion="1.x">
**v2.0ì—ì„œ ì œê±°ë¨:** ê¸°ë³¸ ì¸ì¦ì´ ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.
</VersionAdmonition>
```

## ë²„ì „ ì „í™˜ê¸° ì¸í„°í˜ì´ìŠ¤

### ë²„ì „ ì„ íƒê¸° ì»´í¬ë„ŒíŠ¸

ë²„ì „ ì „í™˜ ì¸í„°í˜ì´ìŠ¤ ìƒì„±:

```typescript
// components/VersionSwitcher.tsx
import React, { useState } from 'react';
import { useRouter } from 'next/router';
import { useVersioning } from '@baidocs/versioning';

interface Version {
  branch: string;
  version: string;
  label: string;
  status: 'active' | 'maintenance' | 'legacy' | 'preview';
  isDefault: boolean;
}

export function VersionSwitcher() {
  const router = useRouter();
  const { currentVersion, availableVersions, switchVersion } = useVersioning();
  const [isOpen, setIsOpen] = useState(false);

  const handleVersionSwitch = async (version: Version) => {
    try {
      await switchVersion(version.version);

      // ë²„ì „ ë³€ê²½ì„ ë°˜ì˜í•˜ë„ë¡ URL ì—…ë°ì´íŠ¸
      const currentPath = router.asPath;
      const newPath = currentPath.replace(
        `/docs/${currentVersion}/`,
        `/docs/${version.version}/`
      );

      router.push(newPath);
      setIsOpen(false);
    } catch (error) {
      console.error('ë²„ì „ ì „í™˜ ì‹¤íŒ¨:', error);
    }
  };

  const getStatusColor = (status: string) => {
    switch (status) {
      case 'active': return '#10b981';
      case 'maintenance': return '#f59e0b';
      case 'legacy': return '#ef4444';
      case 'preview': return '#8b5cf6';
      default: return '#6b7280';
    }
  };

  const getStatusLabel = (status: string) => {
    switch (status) {
      case 'active': return 'í™œì„±';
      case 'maintenance': return 'ìœ ì§€ë³´ìˆ˜';
      case 'legacy': return 'ë ˆê±°ì‹œ';
      case 'preview': return 'ë¯¸ë¦¬ë³´ê¸°';
      default: return '';
    }
  };

  const currentVersionInfo = availableVersions.find(v => v.version === currentVersion);

  return (
    <div className="version-switcher">
      <button
        className="version-trigger"
        onClick={() => setIsOpen(!isOpen)}
        aria-label="ë²„ì „ ì„ íƒ"
        aria-haspopup="listbox"
        aria-expanded={isOpen}
      >
        <span className="current-version">
          {currentVersionInfo?.label || currentVersion}
        </span>
        <span
          className="version-status"
          style={{ color: getStatusColor(currentVersionInfo?.status || '') }}
        >
          {getStatusLabel(currentVersionInfo?.status || '')}
        </span>
        <span className="dropdown-arrow">â–¼</span>
      </button>

      {isOpen && (
        <div className="version-dropdown" role="listbox">
          <div className="version-dropdown-header">
            <span>ë²„ì „ ì„ íƒ</span>
          </div>

          {availableVersions.map((version) => (
            <button
              key={version.version}
              onClick={() => handleVersionSwitch(version)}
              className={`version-option ${
                version.version === currentVersion ? 'active' : ''
              }`}
              role="option"
              aria-selected={version.version === currentVersion}
            >
              <div className="version-info">
                <span className="version-label">{version.label}</span>
                <span
                  className="version-status-badge"
                  style={{ backgroundColor: getStatusColor(version.status) }}
                >
                  {getStatusLabel(version.status)}
                </span>
              </div>

              {version.isDefault && (
                <span className="default-badge">ê¸°ë³¸</span>
              )}

              {version.version === currentVersion && (
                <span className="current-indicator">âœ“</span>
              )}
            </button>
          ))}

          <div className="version-dropdown-footer">
            <a href="/releases" className="release-notes-link">
              ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ ë³´ê¸°
            </a>
          </div>
        </div>
      )}
    </div>
  );
}
```

### ë²„ì „ ë°°ë„ˆ

ë²„ì „ ì •ë³´ í‘œì‹œ:

```typescript
// components/VersionBanner.tsx
import React from 'react';
import { useVersioning } from '@baidocs/versioning';

export function VersionBanner() {
  const { currentVersion, versionConfig } = useVersioning();
  const config = versionConfig[currentVersion];

  if (!config || config.status === 'active') {
    return null;
  }

  const bannerTypes = {
    maintenance: {
      className: 'version-banner-warning',
      icon: 'âš ï¸',
      message: 'ì´ ë²„ì „ì€ ìœ ì§€ë³´ìˆ˜ ëª¨ë“œì…ë‹ˆë‹¤.'
    },
    legacy: {
      className: 'version-banner-danger',
      icon: 'âš ï¸',
      message: 'ì´ê²ƒì€ ë ˆê±°ì‹œ ë²„ì „ì…ë‹ˆë‹¤.'
    },
    preview: {
      className: 'version-banner-info',
      icon: 'ğŸ§ª',
      message: 'ì´ê²ƒì€ ë¯¸ë¦¬ë³´ê¸° ë²„ì „ì…ë‹ˆë‹¤.'
    }
  };

  const bannerInfo = bannerTypes[config.status] || bannerTypes.maintenance;

  return (
    <div className={`version-banner ${bannerInfo.className}`}>
      <div className="version-banner-content">
        <span className="version-banner-icon">{bannerInfo.icon}</span>
        <div className="version-banner-text">
          <strong>{bannerInfo.message}</strong>
          {config.endOfLife && (
            <span> ì§€ì› ì¢…ë£Œ: {new Date(config.endOfLife).toLocaleDateString()}.</span>
          )}
          <a href="/latest" className="version-banner-link">
            ìµœì‹  ë²„ì „ìœ¼ë¡œ ì „í™˜
          </a>
        </div>
      </div>
    </div>
  );
}
```

## ìë™í™”ëœ ë²„ì „ ê´€ë¦¬

### ë¦´ë¦¬ìŠ¤ ìë™í™”

ë²„ì „ ìƒì„± ë° ê´€ë¦¬ ìë™í™”:

```yaml
# .github/workflows/release.yml
name: ë¬¸ì„œ ë¦´ë¦¬ìŠ¤ ìƒì„±

on:
  push:
    tags:
      - 'v*'

jobs:
  create-docs-version:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: íƒœê·¸ì—ì„œ ë²„ì „ ì¶”ì¶œ
        id: version
        run: |
          VERSION=${GITHUB_REF#refs/tags/}
          MAJOR_MINOR=$(echo $VERSION | sed 's/\.[0-9]*$//')
          echo "version=$VERSION" >> $GITHUB_OUTPUT
          echo "major_minor=${MAJOR_MINOR}.x" >> $GITHUB_OUTPUT

      - name: ë²„ì „ ë¸Œëœì¹˜ ìƒì„±
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"

          # ë²„ì „ ë¸Œëœì¹˜ ìƒì„±
          git checkout -b ${{ steps.version.outputs.major_minor }}

          # ìƒˆ ë²„ì „ì„ ìœ„í•œ ì±… ì„¤ì • ì—…ë°ì´íŠ¸
          sed -i 's/version: ".*"/version: "${{ steps.version.outputs.version }}"/' content/book.config.yaml

          # ë²„ì „ ì—…ë°ì´íŠ¸ ì»¤ë°‹
          git add content/book.config.yaml
          git commit -m "${{ steps.version.outputs.version }} ë¬¸ì„œ ìƒì„±"

          # ë²„ì „ ë¸Œëœì¹˜ í‘¸ì‹œ
          git push origin ${{ steps.version.outputs.major_minor }}

      - name: ë‹¤ìŒ ë²„ì „ì„ ìœ„í•œ ë©”ì¸ ë¸Œëœì¹˜ ì—…ë°ì´íŠ¸
        run: |
          git checkout main

          # ë‹¤ìŒ ê°œë°œ ë²„ì „ìœ¼ë¡œ ë²„ì „ ì—…ë°ì´íŠ¸
          NEXT_MINOR=$(($(echo ${{ steps.version.outputs.version }} | cut -d. -f2) + 1))
          NEXT_VERSION="$(echo ${{ steps.version.outputs.version }} | cut -d. -f1).$NEXT_MINOR.0-dev"

          sed -i "s/version: \".*\"/version: \"$NEXT_VERSION\"/" content/book.config.yaml

          git add content/book.config.yaml
          git commit -m "ë‹¤ìŒ ë²„ì „ ì¤€ë¹„: $NEXT_VERSION"
          git push origin main

      - name: ë²„ì „ë³„ ë¬¸ì„œ ë°°í¬
        run: |
          # ìƒˆ ë²„ì „ ë°°í¬ íŠ¸ë¦¬ê±°
          curl -X POST \
            -H "Authorization: Bearer ${{ secrets.DEPLOY_TOKEN }}" \
            -H "Content-Type: application/json" \
            -d '{"version": "${{ steps.version.outputs.major_minor }}"}' \
            https://api.yoursite.com/deploy/docs
```

### ë²„ì „ ì •ë¦¬

ì´ì „ ë²„ì „ ìë™ ì •ë¦¬:

```yaml
# .github/workflows/cleanup-versions.yml
name: ì´ì „ ë¬¸ì„œ ë²„ì „ ì •ë¦¬

on:
  schedule:
    - cron: '0 0 1 * *'  # ì›”ë³„ ì •ë¦¬

jobs:
  cleanup-old-versions:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: ì´ì „ ë²„ì „ ì‹ë³„
        id: old-versions
        run: |
          # ëª¨ë“  ë²„ì „ ë¸Œëœì¹˜ ê°€ì ¸ì˜¤ê¸°
          git fetch --all
          BRANCHES=$(git branch -r | grep "origin/v[0-9]" | sed 's/origin\///')

          # 2ë…„ ì´ìƒ ëœ ë²„ì „ ì°¾ê¸°
          OLD_BRANCHES=""
          for branch in $BRANCHES; do
            LAST_COMMIT_DATE=$(git log -1 --format=%ct origin/$branch)
            TWO_YEARS_AGO=$(($(date +%s) - 63072000))  # 2ë…„ (ì´ˆ)

            if [ $LAST_COMMIT_DATE -lt $TWO_YEARS_AGO ]; then
              OLD_BRANCHES="$OLD_BRANCHES $branch"
            fi
          done

          echo "old_branches=$OLD_BRANCHES" >> $GITHUB_OUTPUT

      - name: ì´ì „ ë²„ì „ ì•„ì¹´ì´ë¸Œ
        if: steps.old-versions.outputs.old_branches != ''
        run: |
          # ì‚­ì œ ì „ ì´ì „ ë²„ì „ ì•„ì¹´ì´ë¸Œ ìƒì„±
          for branch in ${{ steps.old-versions.outputs.old_branches }}; do
            git checkout origin/$branch
            tar -czf "archive-$branch.tar.gz" content/
            # ì•„ì¹´ì´ë¸Œ ìŠ¤í† ë¦¬ì§€ì— ì—…ë¡œë“œ
          done

      - name: ì´ì „ ë²„ì „ ë¸Œëœì¹˜ ì‚­ì œ
        if: steps.old-versions.outputs.old_branches != ''
        run: |
          for branch in ${{ steps.old-versions.outputs.old_branches }}; do
            git push origin --delete $branch
          done

      - name: ë²„ì „ ì„¤ì • ì—…ë°ì´íŠ¸
        run: |
          # ë©”ì¸ ë¸Œëœì¹˜ ì„¤ì •ì—ì„œ ì´ì „ ë²„ì „ ì œê±°
          # ì•„ì¹´ì´ë¸Œëœ ë²„ì „ì„ ì œê±°í•˜ë„ë¡ book.config.yaml ì—…ë°ì´íŠ¸
          git checkout main
          # ... ì—…ë°ì´íŠ¸ ë¡œì§ ...
          git add content/book.config.yaml
          git commit -m "ì„¤ì •ì—ì„œ ì•„ì¹´ì´ë¸Œëœ ë²„ì „ ì œê±°"
          git push origin main
```

## ë²„ì „ ë¶„ì„

### ë²„ì „ ì‚¬ìš©ëŸ‰ ì¶”ì 

ì‚¬ìš©ìê°€ ì•¡ì„¸ìŠ¤í•˜ëŠ” ë²„ì „ ëª¨ë‹ˆí„°ë§:

```typescript
// ë²„ì „ ë¶„ì„
interface VersionAnalytics {
  version: string;
  pageviews: number;
  uniqueUsers: number;
  avgSessionDuration: number;
  bounceRate: number;
  lastAccess: string;
}

async function getVersionAnalytics(timeframe: string = '30d'): Promise<VersionAnalytics[]> {
  const analytics = await analyticsAPI.getVersionStats({
    timeframe,
    metrics: ['pageviews', 'users', 'session_duration', 'bounce_rate']
  });

  return analytics.versions.map(version => ({
    version: version.name,
    pageviews: version.pageviews,
    uniqueUsers: version.unique_users,
    avgSessionDuration: version.avg_session_duration,
    bounceRate: version.bounce_rate,
    lastAccess: version.last_access
  }));
}

// ë²„ì „ ì‚¬ìš© ì¤‘ë‹¨ ì•Œë¦¼
async function notifyVersionDeprecation() {
  const analytics = await getVersionAnalytics('90d');

  for (const version of analytics) {
    const versionConfig = await getVersionConfig(version.version);

    if (versionConfig.status === 'legacy' && version.pageviews > 1000) {
      // ì•„ì§ ë§ì´ ì‚¬ìš©ë˜ëŠ” ë ˆê±°ì‹œ ë²„ì „ - ì•Œë¦¼ ë³´ë‚´ê¸°
      await sendDeprecationNotification({
        version: version.version,
        usage: version.pageviews,
        endOfLife: versionConfig.endOfLife,
        migrationGuide: `/migrate-from-${version.version}`
      });
    }
  }
}
```

## ëª¨ë²” ì‚¬ë¡€

### ë²„ì „ ì „ëµ

#### ì˜ë¯¸ì  ë²„ì „ ê´€ë¦¬

ì˜ë¯¸ì  ë²„ì „ ê´€ë¦¬ ì›ì¹™ì„ ë”°ë¥´ì„¸ìš”:

```yaml
# ë²„ì „ ë¸Œëœì¹˜ ëª…ëª… ì „ëµ
versions:
  - branch: "main"        # ìµœì‹  ê°œë°œ
    version: "4.0.0-dev"

  - branch: "v3.x"        # í˜„ì¬ ì•ˆì • (3.x.x)
    version: "3.2.1"

  - branch: "v2.x"        # ì´ì „ ì•ˆì • (2.x.x)
    version: "2.8.5"

  - branch: "v1.x"        # ë ˆê±°ì‹œ (1.x.x)
    version: "1.15.3"
```

#### ë²„ì „ ë¼ì´í”„ì‚¬ì´í´

ë²„ì „ ë¼ì´í”„ì‚¬ì´í´ ê´€ë¦¬:

1. **ê°œë°œ** (`main`): í™œë°œí•œ ê°œë°œ, ë¹ˆë²ˆí•œ ë³€ê²½
2. **ë¦´ë¦¬ìŠ¤ í›„ë³´** (`rc/v3.0`): ê¸°ëŠ¥ ì™„ì„±, í…ŒìŠ¤íŠ¸ ì¤‘
3. **ì•ˆì •** (`v3.x`): ë¦´ë¦¬ìŠ¤ëœ ë²„ì „, ë²„ê·¸ ìˆ˜ì •ë§Œ
4. **ìœ ì§€ë³´ìˆ˜** (`v2.x`): ë³´ì•ˆ ìˆ˜ì •, ì¤‘ìš”í•œ ë²„ê·¸
5. **ë ˆê±°ì‹œ** (`v1.x`): ì¢…ë£Œ ì˜ˆì • íƒ€ì„ë¼ì¸ ë°œí‘œ
6. **ì•„ì¹´ì´ë¸Œë¨**: ë” ì´ìƒ ìœ ì§€ë³´ìˆ˜í•˜ì§€ ì•ŠìŒ, ë¬¸ì„œ ë³´ì¡´

### ì½˜í…ì¸  ê´€ë¦¬

#### ë²„ì „ë³„ ì½˜í…ì¸ 

```mdx
<!-- ì¢‹ìŒ: ëª…í™•í•œ ë²„ì „ ì§€ì‹œì -->
:::info ë²„ì „ 3.0+
ì´ ê¸°ëŠ¥ì€ ë²„ì „ 3.0 ì´ìƒì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.
:::

<!-- ì¢‹ìŒ: ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ -->
<VersionMigration from="2.x" to="3.x">
ë²„ì „ 2.xì—ì„œëŠ” `oldMethod()`ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. 3.xì—ì„œëŠ” `newMethod()`ë¥¼ ëŒ€ì‹  ì‚¬ìš©í•˜ì„¸ìš”.
</VersionMigration>

<!-- í”¼í•  ê²ƒ: ë¶ˆëª…í™•í•œ ë²„ì „ ê´€ë¦¬ -->
ì´ ìƒˆ ê¸°ëŠ¥ì„ ì´ì œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!
```

#### ì¼ê´€ëœ ë„¤ë¹„ê²Œì´ì…˜

ê°€ëŠ¥í•  ë•Œ ë²„ì „ ê°„ ì¼ê´€ëœ ë„¤ë¹„ê²Œì´ì…˜ êµ¬ì¡° ìœ ì§€:

```yaml
# ëª¨ë“  ë²„ì „ì—ì„œ ì‚¬ìš©ë˜ëŠ” í…œí”Œë¦¿ ë„¤ë¹„ê²Œì´ì…˜
navigationTemplate:
  - title: "ì‹œì‘í•˜ê¸°"
    items:
      - title: "ì„¤ì¹˜"
        path: "installation.mdx"
      - title: "ë¹ ë¥¸ ì‹œì‘"
        path: "quick-start.mdx"

  - title: "API ì°¸ì¡°"
    items:
      # ë²„ì „ë³„ API ë¬¸ì„œ
      - title: "ì¸ì¦"
        path: "api/auth.mdx"
      - title: "ì—”ë“œí¬ì¸íŠ¸"
        path: "api/endpoints.mdx"
```

## ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

#### "ë²„ì „ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ"

```bash
# ë²„ì „ ì„¤ì • í™•ì¸
cat content/book.config.yaml | grep -A 20 "versioning:"

# ì‚¬ìš© ê°€ëŠ¥í•œ ë¸Œëœì¹˜ í™•ì¸
git branch -r | grep "v[0-9]"

# ë²„ì „ ë¸Œëœì¹˜ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
git ls-remote origin v3.x
```

#### "ë²„ì „ ì „í™˜ ì‹¤íŒ¨"

```typescript
// ë²„ì „ ì „í™˜ ë””ë²„ê·¸
const debugVersionSwitch = async (targetVersion: string) => {
  try {
    // ë²„ì „ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
    const available = await getAvailableVersions();
    if (!available.includes(targetVersion)) {
      throw new Error(`ë²„ì „ ${targetVersion}ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤`);
    }

    // ë²„ì „ì— ëŒ€í•œ ì½˜í…ì¸ ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
    const content = await fetchVersionContent(targetVersion);
    if (!content) {
      throw new Error(`ë²„ì „ ${targetVersion}ì— ëŒ€í•œ ì½˜í…ì¸ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤`);
    }

    console.log(`ë²„ì „ ${targetVersion}ì´ ìœ íš¨í•˜ê³  ì½˜í…ì¸ ê°€ ìˆìŠµë‹ˆë‹¤`);
  } catch (error) {
    console.error('ë²„ì „ ì „í™˜ ë””ë²„ê·¸:', error);
  }
};
```

#### "ë²„ì „ ê°„ ë§í¬ ê¹¨ì§"

```typescript
// ë²„ì „ ê°„ ë§í¬ ìˆ˜ì •
const fixCrossVersionLinks = (content: string, currentVersion: string) => {
  // ì ˆëŒ€ ë²„ì „ ë§í¬ë¥¼ ìƒëŒ€ ë§í¬ë¡œ ë³€í™˜
  return content.replace(
    /\/docs\/v[\d\.]+\/(.*?)\.md/g,
    (match, path) => `/docs/${currentVersion}/${path}.mdx`
  );
};
```

## ë‹¤ìŒ ë‹¨ê³„

ê³ ê¸‰ ë²„ì „ ê´€ë¦¬ ì£¼ì œ:

1. **[ë‹¤êµ­ì–´ ì§€ì›](multilingual.mdx)** - ì—¬ëŸ¬ ì–¸ì–´ì— ëŒ€í•œ ë²„ì „ ê´€ë¦¬
2. **[ë°°í¬](../deployment/vercel.mdx)** - ì—¬ëŸ¬ ë²„ì „ ë°°í¬
3. **[ê²€ìƒ‰ ì„¤ì •](search.mdx)** - ë²„ì „ ì¸ì‹ ê²€ìƒ‰

---

*íš¨ê³¼ì ì¸ ë²„ì „ ê´€ë¦¬ëŠ” ì‚¬ìš©ìê°€ ì œí’ˆê³¼ í•¨ê»˜ ë¬¸ì„œë¥¼ ë°œì „ì‹œí‚¬ ìˆ˜ ìˆë„ë¡ í•˜ë©´ì„œ ì†Œí”„íŠ¸ì›¨ì–´ ë²„ì „ì— ì ì ˆí•œ ë¬¸ì„œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.*