# ë¡œì»¬ ë°°í¬

BaiDocsëŠ” ê°œë°œ, í…ŒìŠ¤íŠ¸ ë˜ëŠ” ë¹„ê³µê°œ ë¬¸ì„œ í˜¸ìŠ¤íŒ…ì„ ìœ„í•´ ë¡œì»¬ë¡œ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” ë¬¸ì„œ í™˜ê²½ì„ ì™„ì „íˆ ì œì–´í•  ìˆ˜ ìˆë„ë¡ ë¡œì»¬ ë¨¸ì‹ ì´ë‚˜ ë¹„ê³µê°œ ì„œë²„ì— BaiDocsë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤.

## ê°œìš”

### ë¡œì»¬ ë°°í¬ì˜ ì´ì 

- **ì™„ì „í•œ ì œì–´**: í˜¸ìŠ¤íŒ… í™˜ê²½ì— ëŒ€í•œ ì™„ì „í•œ ì œì–´
- **ê°œì¸ì •ë³´ ë³´í˜¸**: ë¯¼ê°í•œ ë¬¸ì„œë¥¼ ë‚´ë¶€ì— ë³´ê´€
- **ì‚¬ìš©ì ì •ì˜**: ë¬´ì œí•œ ì‚¬ìš©ì ì •ì˜ ê°€ëŠ¥ì„±
- **ì„±ëŠ¥**: íŠ¹ì • ìš”êµ¬ì‚¬í•­ì— ìµœì í™”
- **í†µí•©**: ë‚´ë¶€ ì‹œìŠ¤í…œê³¼ ì‰¬ìš´ í†µí•©

### ë°°í¬ ì•„í‚¤í…ì²˜

```
ë¡œì»¬ BaiDocs ë°°í¬:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ì—ë””í„° ì•±      â”‚    â”‚   ë·°ì–´ ì•±       â”‚    â”‚ ì½˜í…ì¸  ì €ì¥ì†Œ    â”‚
â”‚  (localhost:3001)â”‚    â”‚ (localhost:3000)â”‚    â”‚ (íŒŒì¼ ì‹œìŠ¤í…œ)    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ - íŒŒì¼ í¸ì§‘     â”‚    â”‚ - ë¬¸ì„œ          â”‚    â”‚ - Git ì €ì¥ì†Œ    â”‚
â”‚ - ë¼ì´ë¸Œ ë¯¸ë¦¬ë³´ê¸°â”‚    â”‚ - ê²€ìƒ‰          â”‚    â”‚ - ì—ì…‹          â”‚
â”‚ - Git í†µí•©      â”‚    â”‚ - ë„¤ë¹„ê²Œì´ì…˜     â”‚    â”‚ - ë¹Œë“œ          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ì„¤ì¹˜ ìš”êµ¬ì‚¬í•­

### ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

**ìµœì†Œ ìš”êµ¬ì‚¬í•­:**
- **Node.js**: 18.0 ì´ìƒ
- **RAM**: ìµœì†Œ 4GB, ê¶Œì¥ 8GB
- **ì €ì¥ê³µê°„**: ì„¤ì¹˜ + ì½˜í…ì¸ ìš© 10GB
- **Git**: ë²„ì „ 2.0 ì´ìƒ

**ê¶Œì¥ ìš”êµ¬ì‚¬í•­:**
- **Node.js**: ìµœì‹  LTS ë²„ì „
- **RAM**: ëŒ€ìš©ëŸ‰ ë¬¸ì„œ ì„¸íŠ¸ìš© 16GB
- **ì €ì¥ê³µê°„**: ë” ë‚˜ì€ ì„±ëŠ¥ì„ ìœ„í•œ SSD
- **CPU**: ë” ë¹ ë¥¸ ë¹Œë“œë¥¼ ìœ„í•œ ë©€í‹°ì½”ì–´ í”„ë¡œì„¸ì„œ

### ì†Œí”„íŠ¸ì›¨ì–´ ì˜ì¡´ì„±

```bash
# Node.js ë²„ì „ í™•ì¸
node --version  # 18.0+ ì´ì–´ì•¼ í•¨

# npm ë²„ì „ í™•ì¸
npm --version   # 8.0+ ì´ì–´ì•¼ í•¨

# Git ë²„ì „ í™•ì¸
git --version   # 2.0+ ì´ì–´ì•¼ í•¨

# ì„ íƒì‚¬í•­: ì‚¬ìš© ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬ í™•ì¸
free -h         # Linux
vm_stat         # macOS
```

## ì„¤ì¹˜ ê³¼ì •

### 1. BaiDocs ë‹¤ìš´ë¡œë“œ

BaiDocs ì €ì¥ì†Œë¥¼ ë³µì œí•©ë‹ˆë‹¤:

```bash
# GitHubì—ì„œ ë³µì œ
git clone https://github.com/lablup/baidocs.git
cd baidocs

# ë˜ëŠ” íŠ¹ì • ë²„ì „ ë‹¤ìš´ë¡œë“œ
git clone --branch v3.0.0 https://github.com/lablup/baidocs.git
cd baidocs
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜

í•„ìš”í•œ ëª¨ë“  íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤:

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ì„¤ì¹˜ í™•ì¸
npm run --version
```

### 3. í™˜ê²½ êµ¬ì„±

í™˜ê²½ êµ¬ì„±ì„ ìƒì„±í•©ë‹ˆë‹¤:

```bash
# ì˜ˆì œ í™˜ê²½ íŒŒì¼ ë³µì‚¬
cp .env.example .env.local

# í™˜ê²½ ë³€ìˆ˜ í¸ì§‘
nano .env.local
```

ê¸°ë³¸ í™˜ê²½ êµ¬ì„±:

```bash
# .env.local

# ì• í”Œë¦¬ì¼€ì´ì…˜ URL
NEXT_PUBLIC_EDITOR_URL=http://localhost:3001
NEXT_PUBLIC_VIEWER_URL=http://localhost:3000

# ì½˜í…ì¸  ë””ë ‰í† ë¦¬ (ì ˆëŒ€ ê²½ë¡œ)
CONTENT_PATH=/absolute/path/to/your/content

# ì„ íƒì‚¬í•­: ì‚¬ìš©ì ì •ì˜ í¬íŠ¸ êµ¬ì„±
EDITOR_PORT=3001
VIEWER_PORT=3000

# ì„ íƒì‚¬í•­: ê°œë°œ ì„¤ì •
NODE_ENV=production
DEBUG=false

# ì„ íƒì‚¬í•­: Git êµ¬ì„±
GIT_USER_NAME="BaiDocs Bot"
GIT_USER_EMAIL="baidocs@your-domain.com"

# ì„ íƒì‚¬í•­: ê²€ìƒ‰ êµ¬ì„±
ENABLE_SEARCH=true
SEARCH_INDEX_PATH=/absolute/path/to/search/index

# ì„ íƒì‚¬í•­: PDF ìƒì„±
ENABLE_PDF_GENERATION=true
PDF_OUTPUT_PATH=/absolute/path/to/pdfs
```

### 4. ì½˜í…ì¸  ë””ë ‰í† ë¦¬ ì„¤ì •

ì½˜í…ì¸  ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•˜ê³  êµ¬ì„±í•©ë‹ˆë‹¤:

```bash
# ì½˜í…ì¸  ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p /path/to/your/content
cd /path/to/your/content

# ìƒ˜í”Œ ì½˜í…ì¸ ë¡œ ì´ˆê¸°í™”
git init
git remote add origin https://github.com/your-org/docs-content.git

# ë˜ëŠ” ìƒˆ ì±… ìƒì„±
mkdir -p my-docs/en
cd my-docs

# ê¸°ë³¸ êµ¬ì„± ìƒì„±
cat > book.config.yaml << EOF
id: my-docs
title: My Documentation
description: Local documentation
emoji: ğŸ“š
type: document
languages:
  - en
defaultLanguage: en
navigation:
  en:
    - title: "Home"
      path: "index.mdx"
EOF

# í™ˆí˜ì´ì§€ ìƒì„±
cat > en/index.mdx << EOF
# ë‚´ ë¬¸ì„œì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤

ì´ê²ƒì€ ë¡œì»¬ BaiDocs ì„¤ì¹˜ì…ë‹ˆë‹¤.
EOF
```

## BaiDocs ì‹¤í–‰

### ê°œë°œ ëª¨ë“œ

ì—ë””í„°ì™€ ë·°ì–´ë¥¼ ëª¨ë‘ ê°œë°œ ëª¨ë“œë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤:

```bash
# ê°œë°œ ì„œë²„ ì‹œì‘
npm run dev

# ë˜ëŠ” ê°œë³„ì ìœ¼ë¡œ ì‹œì‘
npm run dev:editor    # í¬íŠ¸ 3001ì˜ ì—ë””í„°
npm run dev:viewer    # í¬íŠ¸ 3000ì˜ ë·°ì–´
```

### í”„ë¡œë•ì…˜ ëª¨ë“œ

ìµœì í™”ëœ í”„ë¡œë•ì…˜ ë¹Œë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤:

```bash
# í”„ë¡œë•ì…˜ìš© ë¹Œë“œ
npm run build

# í”„ë¡œë•ì…˜ ì„œë²„ ì‹œì‘
npm run start

# ë˜ëŠ” ê°œë³„ì ìœ¼ë¡œ ì‹œì‘
npm run start:editor
npm run start:viewer
```

### í”„ë¡œì„¸ìŠ¤ ë§¤ë‹ˆì € (ê¶Œì¥)

í”„ë¡œë•ì…˜ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ì— PM2ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:

```bash
# PM2ë¥¼ ì „ì—­ìœ¼ë¡œ ì„¤ì¹˜
npm install -g pm2

# PM2 êµ¬ì„± ìƒì„±
cat > ecosystem.config.js << EOF
module.exports = {
  apps: [
    {
      name: 'baidocs-editor',
      script: 'npm',
      args: 'run start:editor',
      cwd: '/path/to/baidocs',
      env: {
        NODE_ENV: 'production',
        PORT: 3001
      },
      instances: 1,
      autorestart: true,
      watch: false,
      max_memory_restart: '1G'
    },
    {
      name: 'baidocs-viewer',
      script: 'npm',
      args: 'run start:viewer',
      cwd: '/path/to/baidocs',
      env: {
        NODE_ENV: 'production',
        PORT: 3000
      },
      instances: 'max',
      autorestart: true,
      watch: false,
      max_memory_restart: '1G'
    }
  ]
};
EOF

# PM2ë¡œ ì‹œì‘
pm2 start ecosystem.config.js

# PM2 êµ¬ì„± ì €ì¥
pm2 save
pm2 startup
```

## ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„¤ì •

### Nginx êµ¬ì„±

Nginxë¥¼ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¡œ ì„¤ì •í•©ë‹ˆë‹¤:

```nginx
# /etc/nginx/sites-available/baidocs
server {
    listen 80;
    server_name your-docs-domain.com;

    # HTTPë¥¼ HTTPSë¡œ ë¦¬ë””ë ‰ì…˜
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name your-docs-domain.com;

    # SSL ì¸ì¦ì„œ
    ssl_certificate /path/to/ssl/certificate.crt;
    ssl_certificate_key /path/to/ssl/private.key;

    # SSL êµ¬ì„±
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE+AESGCM:ECDHE+AES256:ECDHE+AES128:!aNULL:!MD5:!DSS;
    ssl_prefer_server_ciphers on;

    # ë³´ì•ˆ í—¤ë”
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;

    # ì—ë””í„° ì• í”Œë¦¬ì¼€ì´ì…˜ (ê´€ë¦¬ìë§Œ)
    location /editor {
        # ì—ë””í„° ì•¡ì„¸ìŠ¤ ì œí•œ
        allow 192.168.1.0/24;  # ë¡œì»¬ ë„¤íŠ¸ì›Œí¬
        allow 10.0.0.0/8;      # VPN ì‚¬ìš©ì
        deny all;

        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        proxy_read_timeout 86400;
    }

    # ë·°ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ (ê³µê°œ ì•¡ì„¸ìŠ¤)
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;

        # ì •ì  ì—ì…‹ ìºì‹œ
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }

        # ìƒì„±ëœ PDF ìºì‹œ
        location /pdfs/ {
            expires 1w;
            add_header Cache-Control "public";
        }
    }

    # í—¬ìŠ¤ ì²´í¬ ì—”ë“œí¬ì¸íŠ¸
    location /health {
        access_log off;
        return 200 "healthy\n";
        add_header Content-Type text/plain;
    }

    # ë³´ì•ˆ ë° ì˜¤ë¥˜ ì²˜ë¦¬
    location = /favicon.ico { access_log off; log_not_found off; }
    location = /robots.txt  { access_log off; log_not_found off; }

    # ë¯¼ê°í•œ íŒŒì¼ ì•¡ì„¸ìŠ¤ ì°¨ë‹¨
    location ~ /\. { deny all; access_log off; log_not_found off; }
    location ~ ~$ { deny all; access_log off; log_not_found off; }
}
```

êµ¬ì„±ì„ í™œì„±í™”í•©ë‹ˆë‹¤:

```bash
# ì‚¬ì´íŠ¸ í™œì„±í™”
sudo ln -s /etc/nginx/sites-available/baidocs /etc/nginx/sites-enabled/

# êµ¬ì„± í…ŒìŠ¤íŠ¸
sudo nginx -t

# Nginx ì¬ë¡œë“œ
sudo systemctl reload nginx
```

### Apache êµ¬ì„±

ëŒ€ì•ˆì ì¸ Apache ì„¤ì •:

```apache
# /etc/apache2/sites-available/baidocs.conf
<VirtualHost *:80>
    ServerName your-docs-domain.com
    Redirect permanent / https://your-docs-domain.com/
</VirtualHost>

<VirtualHost *:443>
    ServerName your-docs-domain.com

    # SSL êµ¬ì„±
    SSLEngine on
    SSLCertificateFile /path/to/ssl/certificate.crt
    SSLCertificateKeyFile /path/to/ssl/private.key

    # ë³´ì•ˆ í—¤ë”
    Header always set X-Frame-Options DENY
    Header always set X-Content-Type-Options nosniff
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"

    # ì—ë””í„° í”„ë¡ì‹œ (ì œí•œëœ ì•¡ì„¸ìŠ¤)
    <Location /editor>
        Require ip 192.168.1.0/24
        Require ip 10.0.0.0/8

        ProxyPreserveHost On
        ProxyPass http://localhost:3001/
        ProxyPassReverse http://localhost:3001/
    </Location>

    # ë·°ì–´ í”„ë¡ì‹œ (ê³µê°œ ì•¡ì„¸ìŠ¤)
    <Location />
        ProxyPreserveHost On
        ProxyPass http://localhost:3000/
        ProxyPassReverse http://localhost:3000/
    </Location>

    # ì •ì  íŒŒì¼ ìºì‹±
    <LocationMatch "\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2)$">
        ExpiresActive On
        ExpiresDefault "access plus 1 year"
        Header set Cache-Control "public, immutable"
    </LocationMatch>

    # PDF ìºì‹±
    <Location /pdfs/>
        ExpiresActive On
        ExpiresDefault "access plus 1 week"
        Header set Cache-Control "public"
    </Location>
</VirtualHost>
```

## ì„œë¹„ìŠ¤ êµ¬ì„±

### Systemd ì„œë¹„ìŠ¤

ìë™ ì‹œì‘ì„ ìœ„í•œ systemd ì„œë¹„ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:

```bash
# ì„œë¹„ìŠ¤ íŒŒì¼ ìƒì„±
sudo cat > /etc/systemd/system/baidocs.service << EOF
[Unit]
Description=BaiDocs Documentation Platform
After=network.target
Wants=network.target

[Service]
Type=forking
User=baidocs
Group=baidocs
WorkingDirectory=/opt/baidocs
ExecStart=/usr/bin/pm2 start /opt/baidocs/ecosystem.config.js --no-daemon
ExecReload=/usr/bin/pm2 reload /opt/baidocs/ecosystem.config.js
ExecStop=/usr/bin/pm2 kill
Environment=NODE_ENV=production
Environment=PATH=/usr/bin:/usr/local/bin
Environment=PM2_HOME=/home/baidocs/.pm2
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# systemd ì¬ë¡œë“œ ë° ì„œë¹„ìŠ¤ í™œì„±í™”
sudo systemctl daemon-reload
sudo systemctl enable baidocs
sudo systemctl start baidocs

# ìƒíƒœ í™•ì¸
sudo systemctl status baidocs
```

## Docker ë°°í¬

### Dockerfile

Docker êµ¬ì„±ì„ ìƒì„±í•©ë‹ˆë‹¤:

```dockerfile
# Dockerfile
FROM node:18-alpine AS base

# í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì˜ì¡´ì„± ì„¤ì¹˜
FROM base AS deps
RUN apk add --no-cache libc6-compat git
WORKDIR /app

# íŒ¨í‚¤ì§€ íŒŒì¼ ë³µì‚¬
COPY package.json package-lock.json ./
RUN npm ci --only=production

# í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì†ŒìŠ¤ ì½”ë“œ ì¬ë¹Œë“œ
FROM base AS builder
WORKDIR /app
COPY --from=deps /app/node_modules ./node_modules
COPY . .

# ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹Œë“œ
RUN npm run build

# í”„ë¡œë•ì…˜ ì´ë¯¸ì§€
FROM base AS runner
WORKDIR /app

ENV NODE_ENV production
RUN addgroup --system --gid 1001 baidocs
RUN adduser --system --uid 1001 baidocs

# í•„ìš”í•œ íŒŒì¼ ë³µì‚¬
COPY --from=builder /app/public ./public
COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/.next/static ./.next/static

# ì½˜í…ì¸  ë””ë ‰í† ë¦¬ ìƒì„±
RUN mkdir -p /app/content && chown -R baidocs:baidocs /app/content

USER baidocs

EXPOSE 3000 3001

ENV PORT 3000
ENV HOSTNAME "0.0.0.0"

CMD ["node", "server.js"]
```

### Docker Compose

```yaml
# docker-compose.yml
version: '3.8'

services:
  baidocs:
    build: .
    ports:
      - "3000:3000"
      - "3001:3001"
    volumes:
      - ./content:/app/content
      - ./data:/app/data
    environment:
      - NODE_ENV=production
      - CONTENT_PATH=/app/content
      - NEXT_PUBLIC_EDITOR_URL=http://localhost:3001
      - NEXT_PUBLIC_VIEWER_URL=http://localhost:3000
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - baidocs
    restart: unless-stopped

volumes:
  content:
  data:
```

### Dockerë¡œ ì‹¤í–‰

```bash
# ì„œë¹„ìŠ¤ ë¹Œë“œ ë° ì‹œì‘
docker-compose up -d

# ë¡œê·¸ ë³´ê¸°
docker-compose logs -f

# ë·°ì–´ ì¸ìŠ¤í„´ìŠ¤ í™•ì¥
docker-compose up -d --scale baidocs=3

# ì„œë¹„ìŠ¤ ì—…ë°ì´íŠ¸
docker-compose pull
docker-compose up -d
```

## ë°±ì—… ë° ìœ ì§€ë³´ìˆ˜

### ìë™ ë°±ì—…

ë°±ì—… ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:

```bash
#!/bin/bash
# backup-baidocs.sh

# êµ¬ì„±
BACKUP_DIR="/backups/baidocs"
CONTENT_DIR="/path/to/baidocs/content"
DATA_DIR="/path/to/baidocs/data"
RETENTION_DAYS=30

# ë°±ì—… ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p "$BACKUP_DIR"

# ë°±ì—… íŒŒì¼ëª… ìƒì„±
BACKUP_FILE="baidocs-backup-$(date +%Y%m%d-%H%M%S).tar.gz"

echo "BaiDocs ë°±ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤..."

# ì••ì¶•ëœ ë°±ì—… ìƒì„±
tar -czf "$BACKUP_DIR/$BACKUP_FILE" \
    --exclude='node_modules' \
    --exclude='.git' \
    --exclude='*.log' \
    -C "$(dirname $CONTENT_DIR)" \
    "$(basename $CONTENT_DIR)" \
    -C "$(dirname $DATA_DIR)" \
    "$(basename $DATA_DIR)"

# ë°±ì—… í™•ì¸
if [ $? -eq 0 ]; then
    echo "ë°±ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤: $BACKUP_FILE"

    # ì˜¤ë˜ëœ ë°±ì—… ì œê±°
    find "$BACKUP_DIR" -name "baidocs-backup-*.tar.gz" -mtime +$RETENTION_DAYS -delete

    echo "ì˜¤ë˜ëœ ë°±ì—…ì´ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤ (ë³´ì¡´ ê¸°ê°„: $RETENTION_DAYSì¼)"
else
    echo "ë°±ì—…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤!" >&2
    exit 1
fi
```

cronìœ¼ë¡œ ìŠ¤ì¼€ì¤„ë§í•©ë‹ˆë‹¤:

```bash
# crontabì— ì¶”ê°€
crontab -e

# ë°±ì—… ì¼ì • ì¶”ê°€ (ë§¤ì¼ ì˜¤ì „ 2ì‹œ)
0 2 * * * /path/to/backup-baidocs.sh >> /var/log/baidocs-backup.log 2>&1
```

### í—¬ìŠ¤ ëª¨ë‹ˆí„°ë§

ëª¨ë‹ˆí„°ë§ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:

```bash
#!/bin/bash
# monitor-baidocs.sh

# êµ¬ì„±
EDITOR_URL="http://localhost:3001/health"
VIEWER_URL="http://localhost:3000/health"
ALERT_EMAIL="admin@your-domain.com"

# ì—ë””í„° í—¬ìŠ¤ ì²´í¬
if ! curl -sf "$EDITOR_URL" > /dev/null; then
    echo "ê²½ê³ : BaiDocs ì—ë””í„°ê°€ ë‹¤ìš´ë˜ì—ˆìŠµë‹ˆë‹¤!" | mail -s "BaiDocs Editor Down" "$ALERT_EMAIL"
fi

# ë·°ì–´ í—¬ìŠ¤ ì²´í¬
if ! curl -sf "$VIEWER_URL" > /dev/null; then
    echo "ê²½ê³ : BaiDocs ë·°ì–´ê°€ ë‹¤ìš´ë˜ì—ˆìŠµë‹ˆë‹¤!" | mail -s "BaiDocs Viewer Down" "$ALERT_EMAIL"
fi

# ë””ìŠ¤í¬ ê³µê°„ í™•ì¸
DISK_USAGE=$(df /opt/baidocs | tail -1 | awk '{print $5}' | sed 's/%//')
if [ "$DISK_USAGE" -gt 85 ]; then
    echo "ê²½ê³ : ë†’ì€ ë””ìŠ¤í¬ ì‚¬ìš©ë¥ : $DISK_USAGE%" | mail -s "BaiDocs High Disk Usage" "$ALERT_EMAIL"
fi

# ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  í™•ì¸
MEMORY_USAGE=$(free | grep Mem | awk '{printf("%.0f\n", $3/$2 * 100.0)}')
if [ "$MEMORY_USAGE" -gt 90 ]; then
    echo "ê²½ê³ : ë†’ì€ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ : $MEMORY_USAGE%" | mail -s "BaiDocs High Memory Usage" "$ALERT_EMAIL"
fi
```

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### ì•¡ì„¸ìŠ¤ ì œì–´

**ì—ë””í„° ì•¡ì„¸ìŠ¤ ì œí•œ:**
- ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë„¤íŠ¸ì›Œí¬ë¡œ ì—ë””í„° ì•¡ì„¸ìŠ¤ ì œí•œ
- ì›ê²© ê´€ë¦¬ ì•¡ì„¸ìŠ¤ì— VPN ì‚¬ìš©
- ë¯¼ê°í•œ í™˜ê²½ì—ì„œ ì¸ì¦ êµ¬í˜„

**íŒŒì¼ ì‹œìŠ¤í…œ ê¶Œí•œ:**
```bash
# ì ì ˆí•œ ê¶Œí•œ ì„¤ì •
sudo chown -R baidocs:baidocs /opt/baidocs
sudo chmod -R 750 /opt/baidocs
sudo chmod -R 640 /opt/baidocs/content
```

### SSL êµ¬ì„±

**SSL ì¸ì¦ì„œ ì„¤ì •:**
```bash
# Let's Encrypt ì‚¬ìš©
sudo certbot --nginx -d your-docs-domain.com

# ë˜ëŠ” ì‚¬ìš©ì ì •ì˜ ì¸ì¦ì„œ ì‚¬ìš©
sudo cp your-certificate.crt /etc/ssl/certs/
sudo cp your-private.key /etc/ssl/private/
sudo chmod 600 /etc/ssl/private/your-private.key
```

### ë°©í™”ë²½ êµ¬ì„±

```bash
# UFW êµ¬ì„± (Ubuntu/Debian)
sudo ufw allow ssh
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw deny 3000  # ì•±ì— ì§ì ‘ ì•¡ì„¸ìŠ¤ ì°¨ë‹¨
sudo ufw deny 3001
sudo ufw enable
```

## ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

#### "Port Already in Use"

```bash
# í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ í™•ì¸
sudo netstat -tulpn | grep :3000
sudo lsof -i :3000

# í¬íŠ¸ ì‚¬ìš© í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
sudo kill -9 <PID>

# ë˜ëŠ” ë‹¤ë¥¸ í¬íŠ¸ ì‚¬ìš©
PORT=3002 npm run start:viewer
PORT=3003 npm run start:editor
```

#### "Permission Denied" ì˜¤ë¥˜

```bash
# íŒŒì¼ ê¶Œí•œ ìˆ˜ì •
sudo chown -R $USER:$USER /path/to/baidocs
chmod -R 755 /path/to/baidocs

# ì½˜í…ì¸  ë””ë ‰í† ë¦¬ ê¶Œí•œ ìˆ˜ì •
sudo chown -R baidocs:baidocs /path/to/content
chmod -R 750 /path/to/content
```

#### "Out of Memory" ì˜¤ë¥˜

```bash
# Node.js ë©”ëª¨ë¦¬ í•œë„ ì¦ê°€
node --max-old-space-size=4096 apps/viewer/server.js

# ë˜ëŠ” í™˜ê²½ì—ì„œ ì„¤ì •
export NODE_OPTIONS="--max-old-space-size=4096"
```

### ë¡œê·¸ ë¶„ì„

```bash
# ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ ë³´ê¸°
tail -f ~/.pm2/logs/*.log

# ì‹œìŠ¤í…œ ë¡œê·¸ ë³´ê¸°
sudo journalctl -u baidocs -f

# Nginx ë¡œê·¸ ë³´ê¸°
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log
```

## ë‹¤ìŒ ë‹¨ê³„

ë¡œì»¬ ë°°í¬ë¥¼ ì™„ë£Œí•˜ëŠ” ë°©ë²•:

1. **[Vercel ë°°í¬](vercel.mdx)** - ì „ ì„¸ê³„ ì•¡ì„¸ìŠ¤ë¥¼ ìœ„í•œ í´ë¼ìš°ë“œ ë°°í¬
2. **[ê²€ìƒ‰ ì„¤ì •](../advanced/search.mdx)** - ì½˜í…ì¸ ì— ë§ëŠ” ê²€ìƒ‰ ìµœì í™”
3. **[ë‹¤êµ­ì–´ ì§€ì›](../advanced/multilingual.mdx)** - êµ­ì œ ì–¸ì–´ ì¶”ê°€

---

*ë¡œì»¬ ë°°í¬ëŠ” BaiDocs ê¸°ëŠ¥ì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ìœ ì§€í•˜ë©´ì„œ ë¬¸ì„œ í™˜ê²½ì„ ì™„ì „íˆ ì œì–´í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.*