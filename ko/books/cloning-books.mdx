# 책 복제하기

기존 BaiDocs 저장소가 있거나 다른 저장소의 문서를 사용하고 싶다면, 복제를 통해 해당 콘텐츠를 로컬 BaiDocs 환경으로 매끄럽게 가져올 수 있습니다.

## 복제 vs 새로 만들기

| 사용 사례 | 권장사항 |
|----------|--------|
| 기존 BaiDocs 저장소 | **복제** |
| 팀 멤버로 프로젝트 참여 | **복제** |
| 백업/복구 | **복제** |
| 기존 문서 포크 | **복제** 후 수정 |
| 처음부터 시작 | **새로 만들기** |
| 다른 도구에서 변환 | **가져오기 & 변환** |

## 복제 과정

### 1단계: 복제 기능 접근

BaiDocs Editor 홈페이지에서 **"저장소 복제"**를 클릭하세요:

![저장소 복제 인터페이스](../_assets/clone-repository.png)

### 2단계: 저장소 설정

#### 기본 정보

- **저장소 URL**: Git 저장소 URL
  ```
  HTTPS: https://github.com/username/docs-repo.git
  SSH:   git@github.com:username/docs-repo.git
  ```

- **대상 이름**: 복제된 책의 로컬 디렉토리 이름
  - 다른 책들과 중복되지 않아야 함
  - 기본값은 저장소 이름
  - 명확성을 위해 사용자 정의 가능

- **이모지**: 책의 시각적 식별자
  - 선택사항이지만 권장
  - 목록에서 책을 구별하는데 도움

#### 저장소 유형

BaiDocs는 다양한 저장소 구조를 자동으로 감지하고 처리합니다:

##### 표준 BaiDocs 저장소

```
repo/
├── book.config.yaml    # BaiDocs 설정
├── en/                # 언어 디렉토리
│   ├── index.mdx
│   └── ...
├── ko/
└── ...
```

**자동 감지**: BaiDocs가 구조를 인식하고 직접 가져옵니다.

##### 문서 하위 디렉토리가 있는 모노레포

```
monorepo/
├── src/               # 애플리케이션 코드
├── docs/              # 문서 하위 디렉토리
│   ├── book.config.yaml
│   ├── en/
│   └── ko/
└── package.json
```

**설정 옵션**:
- **하위 디렉토리 사용**: 모노레포에 대해 활성화
- **하위 디렉토리 경로**: 문서 경로 지정 (예: `docs`)
- **Sparse Checkout**: 문서 디렉토리만 다운로드

#### 브랜치 선택

작업할 브랜치를 선택하세요:

- **모든 브랜치**: 모든 브랜치와 함께 전체 저장소 복제
- **특정 브랜치**: 필요한 브랜치만 선택
  - 복제 시간과 디스크 사용량 감소
  - 대용량 저장소에 적합
  - 나중에 더 많은 브랜치 추가 가능

**브랜치 선택 인터페이스**:
```
☑ main              (기본 브랜치)
☑ v2.0              (버전 2.0 문서)
☐ experimental      (개발 브랜치)
☑ v1.0              (레거시 버전)
```

### 3단계: 고급 옵션

#### 인증

**공개 저장소**: 인증이 필요 없음

**비공개 저장소**: 자격 증명 설정
- **개인 액세스 토큰** (권장)
- **SSH 키** (SSH URL용)
- **사용자명/비밀번호** (보안성 낮음)

#### 복제 최적화

- **Shallow Clone**: 최근 히스토리만 다운로드 (더 빠름)
- **Single Branch**: 초기에 하나의 브랜치만 다운로드
- **Sparse Checkout**: 문서 파일만 다운로드

## 지원되는 저장소 구조

### 1. 표준 BaiDocs 저장소

**구조**:
```
docs-repo/
├── book.config.yaml
├── en/
│   ├── index.mdx
│   ├── getting-started/
│   └── _assets/
└── ko/
    ├── index.mdx
    └── getting-started/
```

**복제 결과**: 직접 통합, 바로 사용 가능

### 2. 문서가 포함된 모노레포

**구조**:
```
project-monorepo/
├── apps/
├── packages/
├── docs/                   ← 여기에 문서
│   ├── book.config.yaml
│   └── en/
└── README.md
```

**복제 설정**:
- "하위 디렉토리 사용" 활성화
- "하위 디렉토리 경로"를 `docs`로 설정
- BaiDocs가 자동으로 구조 감지

### 3. 레거시 문서 저장소

**구조**:
```
old-docs/
├── README.md
├── docs/
│   ├── chapter1.md
│   ├── chapter2.md
│   └── _assets/
└── config.yml
```

**복제 결과**:
- 수동 설정이 필요할 수 있음
- 복제 후 BaiDocs 구조로 변환
- 더 나은 결과를 위해 가져오기 & 변환 사용

## 복제 후 설정

### 자동 감지

BaiDocs는 다음을 자동으로 감지합니다:

- **책 설정**: `book.config.yaml` 읽기
- **언어 구조**: 언어 디렉토리 식별
- **네비게이션**: 기존 네비게이션 사용 또는 파일에서 생성
- **Git 설정**: Git 히스토리와 원격 연결 보존

### 수동 설정 (필요한 경우)

자동 감지가 실패하거나 불완전한 경우:

#### book.config.yaml 업데이트

```yaml
# 누락된 설정 추가
id: cloned-book
title: 문서 제목
description: 가져온 문서
emoji: 📖
type: document
languages:
  - en
  - ko
defaultLanguage: en
```

#### 네비게이션 구조 수정

```yaml
navigation:
  en:
    - title: "홈"
      path: "index.mdx"
    - title: "시작하기"
      items:
        - title: "설치"
          path: "getting-started/installation.md"
        - title: "빠른 시작"
          path: "getting-started/quick-start.md"
```

## 복제된 책 작업하기

### 원격과 동기화

로컬 복사본을 최신 상태로 유지하세요:

```bash
cd content/cloned-book
git pull origin main
```

### 변경사항 기여

변경사항을 만들고 원본 저장소로 다시 푸시하세요:

```bash
# BaiDocs Editor에서 변경
cd content/cloned-book
git add .
git commit -m "문서 업데이트"
git push origin main
```

### 브랜치 관리

다른 버전으로 작업하기:

```bash
# 다른 브랜치로 전환
git checkout v2.0

# 기능 브랜치 생성
git checkout -b feature/new-section
# 변경, 커밋, 푸시
git push origin feature/new-section
```

## 고급 복제 시나리오

### Sparse Checkout으로 복제

대용량 저장소의 경우, 문서만 복제:

```bash
git clone --filter=blob:none --sparse https://github.com/user/repo.git
cd repo
git sparse-checkout set docs/
```

### 특정 브랜치 복제

특정 브랜치만 복제:

```bash
git clone --branch v2.0 --single-branch https://github.com/user/repo.git
```

### 다른 이름으로 복제

다른 로컬 이름으로 복제:

```bash
git clone https://github.com/user/repo.git my-local-name
```

## 문제 해결

### 일반적인 문제

#### "저장소를 찾을 수 없음"
- 저장소 URL이 올바른지 확인
- 저장소가 공개인지 또는 액세스 권한이 있는지 확인
- 비공개 저장소의 경우, 인증이 설정되어 있는지 확인

#### "권한이 거부됨"
- Git 자격 증명 확인
- 저장소 액세스 권한 확인
- 비밀번호 대신 개인 액세스 토큰 사용

#### "디렉토리가 이미 존재함"
- 다른 대상 이름 선택
- 안전하다면 기존 디렉토리 제거
- 강제 복제 사용 (기존 항목 덮어쓰기)

#### "문서를 찾을 수 없음"
- 저장소가 BaiDocs 호환이 아닐 수 있음
- 하위 디렉토리 경로 설정 확인
- 대신 가져오기 & 변환 사용 고려

### 복구 작업

#### 저장소 재복제
```bash
rm -rf content/problematic-clone
# 수정된 설정으로 다시 복제
```

#### 원격 연결 수정
```bash
cd content/cloned-book
git remote -v  # 현재 원격 확인
git remote set-url origin https://correct-url.git
```

#### 원격 상태로 재설정
```bash
cd content/cloned-book
git fetch origin
git reset --hard origin/main
```

## 모범 사례

### 복제 전

- **저장소 확인**: BaiDocs 호환 콘텐츠가 포함되어 있는지 확인
- **액세스 확인**: 적절한 저장소 권한이 있는지 확인
- **구조 계획**: 로컬 이름 지정 및 구성 결정

### 복제 중

- **브랜치 신중히 선택**: 활발히 사용할 브랜치만 복제
- **Sparse Checkout 사용**: 대용량 저장소의 경우, 필요한 파일만 복제
- **인증 설정**: 비공개 저장소에 대한 적절한 자격 증명 설정

### 복제 후

- **설정 확인**: book.config.yaml이 완전한지 확인
- **로컬 테스트**: 모든 콘텐츠가 올바르게 렌더링되는지 확인
- **동기화 설정**: 콘텐츠를 최신 상태로 유지하는 워크플로우 설정

## 팀과의 통합

### 팀 워크플로우

1. **중앙 저장소**: 공유 저장소에 문서 유지
2. **개별 복제**: 팀 멤버가 BaiDocs 인스턴스에 복제
3. **협업 편집**: 변경사항에 Git 워크플로우 사용
4. **자동 배포**: 메인 브랜치에서 배포

### 권한 관리

- **읽기 액세스**: 문서 보기 및 복제용
- **쓰기 액세스**: 변경사항 기여용
- **관리자 액세스**: 저장소 설정 및 브랜치 보호용

### 브랜치 전략

```
main                 ← 프로덕션 문서
├── develop         ← 통합 브랜치
├── feature/api-v2  ← 기능 브랜치
└── hotfix/typo     ← 빠른 수정
```

## 다음 단계

책을 복제한 후:

1. **[콘텐츠 탐색](../writing/markdown-basics.mdx)**: 기존 구조 이해
2. **[설정 사용자화](../advanced/multilingual.mdx)**: 필요에 맞게 조정
3. **[변경사항 기여](../writing/mdx-features.mdx)**: 개선사항 추가
4. **[업데이트 배포](../deployment/vercel.mdx)**: 변경사항 공유

---

*복제된 저장소는 기존 문서를 BaiDocs 워크플로우로 매끄럽게 가져옵니다.*