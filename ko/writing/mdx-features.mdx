# MDX 기능

MDX (Markdown + JSX)는 BaiDocs 콘텐츠 생성의 핵심입니다. 마크다운의 단순함과 React 컴포넌트의 강력함을 결합하여 풍부하고 상호작용적인 문서를 만들 수 있습니다.

## MDX란 무엇인가?

MDX를 사용하면 마크다운 파일에서 직접 JSX를 작성할 수 있습니다. 이는 다음을 의미합니다:

- 문서에서 React 컴포넌트 사용
- 사용자 정의 레이아웃과 스타일링 생성
- 상호작용 요소 임베드
- 재사용 가능한 콘텐츠 블록 구축

```mdx
# 일반 마크다운 헤더

**굵은** 텍스트가 있는 일반 마크다운 콘텐츠입니다.

<div style={{backgroundColor: '#f0f8ff', padding: '1rem', borderRadius: '8px'}}>
  사용자 정의 스타일링이 있는 JSX 컴포넌트입니다!
</div>

import CustomComponent from '../components/CustomComponent'

<CustomComponent data="example" />
```

## MDX에서 JSX

### 인라인 JSX 요소

콘텐츠에서 HTML/JSX 요소를 직접 사용할 수 있습니다:

```mdx
<div className="highlight-box">
  이 콘텐츠는 사용자 정의 컨테이너에 있습니다.
</div>

<span style={{color: 'red', fontWeight: 'bold'}}>
  중요한 빨간 텍스트
</span>

<details>
  <summary>클릭하여 펼치기</summary>
  <p>토글할 수 있는 숨겨진 콘텐츠입니다.</p>
</details>
```

**결과:**

<div style={{backgroundColor: '#f0f8ff', padding: '1rem', borderRadius: '8px'}}>
  이 콘텐츠는 사용자 정의 컨테이너에 있습니다.
</div>

<span style={{color: 'red', fontWeight: 'bold'}}>
  중요한 빨간 텍스트
</span>

### JavaScript 표현식

콘텐츠 내에서 JavaScript 표현식을 사용하세요:

```mdx
현재 날짜: {new Date().toLocaleDateString()}

수학 계산: {2 + 3 = {2 + 3}}

조건부 콘텐츠: {true ? '이것이 표시됩니다' : '이것은 표시되지 않습니다'}

{/* 이것은 JSX 주석입니다 */}
```

**결과:**
현재 날짜: {new Date().toLocaleDateString()}

수학 계산: 2 + 3 = {2 + 3}

## 사용자 정의 컴포넌트

### 컴포넌트 가져오기

MDX 파일에서 React 컴포넌트를 가져와서 사용할 수 있습니다:

```mdx
import { Button } from '../components/Button'
import CodeDemo from '../components/CodeDemo'
import { Alert } from '../components/Alert'

<Alert type="info">
  사용자 정의 알림 컴포넌트입니다.
</Alert>

<Button onClick={() => alert('클릭됨!')}>
  클릭하세요
</Button>

<CodeDemo language="javascript">
  console.log('상호작용 코드 데모');
</CodeDemo>
```

### 재사용 가능한 컴포넌트 만들기

반복되는 콘텐츠를 위한 컴포넌트를 만드세요:

```mdx
export const FeatureBox = ({ title, children, icon }) => (
  <div style={{
    border: '2px solid #e0e0e0',
    borderRadius: '8px',
    padding: '1.5rem',
    margin: '1rem 0'
  }}>
    <h3 style={{marginTop: 0}}>
      {icon && <span>{icon} </span>}
      {title}
    </h3>
    {children}
  </div>
)

<FeatureBox title="사용하기 쉬움" icon="🎯">
  BaiDocs는 문서 생성을 간단하고 직관적으로 만듭니다.
</FeatureBox>

<FeatureBox title="강력한 기능" icon="⚡">
  복잡한 문서 요구사항을 위한 고급 기능.
</FeatureBox>
```

## 고급 레이아웃 기법

### 다중 컬럼 레이아웃

반응형 컬럼 레이아웃을 만드세요:

```mdx
<div style={{
  display: 'grid',
  gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',
  gap: '1rem',
  marginTop: '1rem'
}}>
  <div style={{padding: '1rem', backgroundColor: '#f9f9f9'}}>
    <h4>컬럼 1</h4>
    <p>첫 번째 컬럼의 콘텐츠.</p>
  </div>

  <div style={{padding: '1rem', backgroundColor: '#f9f9f9'}}>
    <h4>컬럼 2</h4>
    <p>두 번째 컬럼의 콘텐츠.</p>
  </div>

  <div style={{padding: '1rem', backgroundColor: '#f9f9f9'}}>
    <h4>컬럼 3</h4>
    <p>세 번째 컬럼의 콘텐츠.</p>
  </div>
</div>
```

### 유연한 컨테이너

유연한 콘텐츠 컨테이너를 만드세요:

```mdx
<div style={{
  display: 'flex',
  flexDirection: 'row',
  gap: '1rem',
  alignItems: 'flex-start'
}}>
  <div style={{flex: '1', backgroundColor: '#e3f2fd', padding: '1rem'}}>
    <h4>주요 콘텐츠</h4>
    <p>이 섹션은 대부분의 공간을 차지합니다.</p>
  </div>

  <div style={{flex: '0 0 200px', backgroundColor: '#fff3e0', padding: '1rem'}}>
    <h4>사이드바</h4>
    <p>고정 너비 사이드바 콘텐츠.</p>
  </div>
</div>
```

### 반응형 디자인

모바일 친화적인 레이아웃을 만드세요:

```mdx
<div style={{
  display: 'flex',
  flexDirection: 'column',
  gap: '1rem'
}}>
  <div style={{
    '@media (min-width: 768px)': {
      display: 'flex',
      flexDirection: 'row',
      gap: '2rem'
    }
  }}>
    <div style={{flex: 1}}>
      <h4>반응형 섹션 1</h4>
      <p>모바일에서는 세로로 쌓이고, 데스크톱에서는 나란히 배치됩니다.</p>
    </div>

    <div style={{flex: 1}}>
      <h4>반응형 섹션 2</h4>
      <p>화면 크기에 자동으로 적응합니다.</p>
    </div>
  </div>
</div>
```

## 상호작용 요소

### 탭 컴포넌트

탭형 콘텐츠 섹션을 만드세요:

```mdx
export const Tabs = ({ children, defaultTab = 0 }) => {
  const [activeTab, setActiveTab] = useState(defaultTab);
  const tabs = React.Children.toArray(children);

  return (
    <div style={{border: '1px solid #ddd', borderRadius: '8px'}}>
      <div style={{display: 'flex', borderBottom: '1px solid #ddd'}}>
        {tabs.map((tab, index) => (
          <button
            key={index}
            onClick={() => setActiveTab(index)}
            style={{
              padding: '0.75rem 1rem',
              border: 'none',
              backgroundColor: activeTab === index ? '#f0f0f0' : 'transparent',
              cursor: 'pointer'
            }}
          >
            {tab.props.title}
          </button>
        ))}
      </div>
      <div style={{padding: '1rem'}}>
        {tabs[activeTab]}
      </div>
    </div>
  );
};

export const TabPanel = ({ title, children }) => <div>{children}</div>;

<Tabs>
  <TabPanel title="JavaScript">
    ```javascript
    const greeting = '안녕하세요, 세상!';
    console.log(greeting);
    ```
  </TabPanel>

  <TabPanel title="Python">
    ```python
    greeting = '안녕하세요, 세상!'
    print(greeting)
    ```
  </TabPanel>

  <TabPanel title="Go">
    ```go
    package main
    import "fmt"

    func main() {
        fmt.Println("안녕하세요, 세상!")
    }
    ```
  </TabPanel>
</Tabs>
```

### 접을 수 있는 콘텐츠

확장 가능한 섹션을 만드세요:

```mdx
export const Collapsible = ({ title, children, defaultOpen = false }) => {
  const [isOpen, setIsOpen] = useState(defaultOpen);

  return (
    <div style={{
      border: '1px solid #ddd',
      borderRadius: '8px',
      marginBottom: '1rem'
    }}>
      <button
        onClick={() => setIsOpen(!isOpen)}
        style={{
          width: '100%',
          padding: '1rem',
          textAlign: 'left',
          backgroundColor: '#f8f9fa',
          border: 'none',
          borderRadius: '8px 8px 0 0',
          cursor: 'pointer',
          fontWeight: 'bold'
        }}
      >
        {title} {isOpen ? '▼' : '▶'}
      </button>
      {isOpen && (
        <div style={{padding: '1rem'}}>
          {children}
        </div>
      )}
    </div>
  );
};

<Collapsible title="고급 설정">
  이 콘텐츠는 기본적으로 숨겨져 있고 제목을 클릭하여 펼칠 수 있습니다.

  ```yaml
  advanced:
    cache: true
    compression: gzip
    timeout: 30000
  ```
</Collapsible>

<Collapsible title="API 참조" defaultOpen={true}>
  이 섹션은 기본적으로 열려 있습니다.

  - `GET /api/users` - 모든 사용자 가져오기
  - `POST /api/users` - 새 사용자 생성
  - `PUT /api/users/:id` - 사용자 업데이트
</Collapsible>
```

## 코드 향상

### 복사 버튼이 있는 코드

복사 기능이 있는 코드 블록을 만드세요:

```mdx
export const CodeBlock = ({ children, language, copyable = true }) => {
  const [copied, setCopied] = useState(false);

  const copyCode = () => {
    navigator.clipboard.writeText(children);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <div style={{position: 'relative'}}>
      {copyable && (
        <button
          onClick={copyCode}
          style={{
            position: 'absolute',
            top: '0.5rem',
            right: '0.5rem',
            padding: '0.25rem 0.5rem',
            fontSize: '0.8rem',
            backgroundColor: copied ? '#4caf50' : '#2196f3',
            color: 'white',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer'
          }}
        >
          {copied ? '복사됨!' : '복사'}
        </button>
      )}
      <pre style={{
        backgroundColor: '#f5f5f5',
        padding: '1rem',
        borderRadius: '8px',
        overflow: 'auto'
      }}>
        <code>{children}</code>
      </pre>
    </div>
  );
};

<CodeBlock language="bash">
npm install @baidocs/cli
baidocs init my-docs
cd my-docs
baidocs dev
</CodeBlock>
```

### 강조된 코드 라인

코드 블록에서 특정 라인을 강조하세요:

```mdx
export const HighlightedCode = ({ children, highlightLines = [] }) => {
  const lines = children.split('\n');

  return (
    <pre style={{backgroundColor: '#f5f5f5', padding: '1rem', borderRadius: '8px'}}>
      {lines.map((line, index) => (
        <div
          key={index}
          style={{
            backgroundColor: highlightLines.includes(index + 1) ? '#fff3cd' : 'transparent',
            padding: '0 0.5rem',
            margin: '0 -0.5rem'
          }}
        >
          <code>{line}</code>
        </div>
      ))}
    </pre>
  );
};

<HighlightedCode highlightLines={[2, 4]}>
{`function example() {
  const important = '이 라인이 강조됩니다';
  const normal = '이 라인은 일반적입니다';
  const alsoImportant = '이 라인도 강조됩니다';
  return { important, normal, alsoImportant };
}`}
</HighlightedCode>
```

## 데이터 시각화

### 간단한 차트

기본 차트와 시각화를 만드세요:

```mdx
export const ProgressBar = ({ value, max = 100, label }) => (
  <div style={{marginBottom: '1rem'}}>
    {label && <div style={{marginBottom: '0.5rem', fontWeight: 'bold'}}>{label}</div>}
    <div style={{
      width: '100%',
      height: '20px',
      backgroundColor: '#e0e0e0',
      borderRadius: '10px',
      overflow: 'hidden'
    }}>
      <div style={{
        width: `${(value / max) * 100}%`,
        height: '100%',
        backgroundColor: '#4caf50',
        transition: 'width 0.3s ease'
      }} />
    </div>
    <div style={{textAlign: 'right', fontSize: '0.9rem', marginTop: '0.25rem'}}>
      {value} / {max} ({Math.round((value / max) * 100)}%)
    </div>
  </div>
);

<ProgressBar value={75} max={100} label="프로젝트 완성도" />
<ProgressBar value={45} max={60} label="문서 커버리지" />
<ProgressBar value={12} max={15} label="팀 멤버" />
```

### 비교 표

향상된 비교 표를 만드세요:

```mdx
export const ComparisonTable = ({ data, highlight = [] }) => (
  <div style={{overflowX: 'auto'}}>
    <table style={{width: '100%', borderCollapse: 'collapse'}}>
      <thead>
        <tr style={{backgroundColor: '#f0f0f0'}}>
          {data.headers.map((header, index) => (
            <th key={index} style={{
              padding: '0.75rem',
              textAlign: 'left',
              borderBottom: '2px solid #ddd',
              backgroundColor: highlight.includes(index) ? '#e3f2fd' : '#f0f0f0'
            }}>
              {header}
            </th>
          ))}
        </tr>
      </thead>
      <tbody>
        {data.rows.map((row, rowIndex) => (
          <tr key={rowIndex}>
            {row.map((cell, cellIndex) => (
              <td key={cellIndex} style={{
                padding: '0.75rem',
                borderBottom: '1px solid #ddd',
                backgroundColor: highlight.includes(cellIndex) ? '#f3e5f5' : 'transparent'
              }}>
                {cell}
              </td>
            ))}
          </tr>
        ))}
      </tbody>
    </table>
  </div>
);

<ComparisonTable
  highlight={[1]}
  data={{
    headers: ['기능', '기본', '프로', '엔터프라이즈'],
    rows: [
      ['사용자', '1명', '10명', '무제한'],
      ['저장공간', '1GB', '100GB', '무제한'],
      ['지원', '이메일', '24/7 채팅', '전화 + 전담'],
      ['API 호출', '월 1,000회', '월 100,000회', '무제한']
    ]
  }}
/>
```

## MDX 모범 사례

### 컴포넌트 구성

컴포넌트를 논리적으로 구조화하세요:

```mdx
// 파일 상단에
import { Button, Alert, CodeBlock } from '../components'

// 간단한 컴포넌트는 인라인으로 정의
export const Highlight = ({ children, color = 'yellow' }) => (
  <mark style={{backgroundColor: color, padding: '0.1rem 0.2rem'}}>
    {children}
  </mark>
)

// 콘텐츠 전체에서 컴포넌트 사용
<Alert type="warning">
  진행하기 전에 <Highlight color="orange">데이터를 백업</Highlight>했는지 확인하세요.
</Alert>
```

### 성능 고려사항

**무거운 컴포넌트 지연 로드**:
```mdx
import { lazy, Suspense } from 'react'

const HeavyChart = lazy(() => import('../components/HeavyChart'))

<Suspense fallback={<div>차트 로딩 중...</div>}>
  <HeavyChart data={chartData} />
</Suspense>
```

**인라인 스타일 최적화**:
```mdx
// 좋음: 스타일을 한 번 정의
export const cardStyle = {
  border: '1px solid #ddd',
  borderRadius: '8px',
  padding: '1rem',
  marginBottom: '1rem'
}

<div style={cardStyle}>콘텐츠</div>
<div style={cardStyle}>더 많은 콘텐츠</div>

// 피할 것: 인라인 스타일 남발
<div style={{border: '1px solid #ddd', borderRadius: '8px'}}>콘텐츠</div>
```

### 접근성

컴포넌트를 접근 가능하게 만드세요:

```mdx
export const AccessibleButton = ({ children, onClick, ...props }) => (
  <button
    onClick={onClick}
    style={{
      padding: '0.75rem 1.5rem',
      fontSize: '1rem',
      border: '2px solid #2196f3',
      backgroundColor: '#2196f3',
      color: 'white',
      borderRadius: '8px',
      cursor: 'pointer'
    }}
    // 접근성 속성
    role="button"
    aria-label={props.ariaLabel}
    tabIndex={0}
    {...props}
  >
    {children}
  </button>
)

<AccessibleButton
  ariaLabel="설치 가이드 다운로드"
  onClick={() => downloadGuide()}
>
  가이드 다운로드
</AccessibleButton>
```

## 일반적인 MDX 패턴

### 문서 카드

```mdx
export const DocCard = ({ title, description, link, icon }) => (
  <div style={{
    border: '1px solid #e0e0e0',
    borderRadius: '8px',
    padding: '1.5rem',
    marginBottom: '1rem',
    transition: 'box-shadow 0.2s',
    ':hover': {
      boxShadow: '0 4px 8px rgba(0,0,0,0.1)'
    }
  }}>
    <h3 style={{marginTop: 0}}>
      {icon && <span style={{marginRight: '0.5rem'}}>{icon}</span>}
      {title}
    </h3>
    <p>{description}</p>
    {link && (
      <a href={link} style={{
        color: '#2196f3',
        textDecoration: 'none',
        fontWeight: 'bold'
      }}>
        더 알아보기 →
      </a>
    )}
  </div>
)

<div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '1rem'}}>
  <DocCard
    title="시작하기"
    description="BaiDocs의 기본 사항 배우기"
    link="../getting-started/overview.mdx"
    icon="🚀"
  />

  <DocCard
    title="고급 기능"
    description="강력한 기능들 탐색하기"
    link="../advanced/themes.mdx"
    icon="⚡"
  />

  <DocCard
    title="배포"
    description="문서 배포하기"
    link="../deployment/vercel.mdx"
    icon="☁️"
  />
</div>
```

## 다음 단계

MDX를 마스터하면 다음을 만들 수 있습니다:

1. **[풍부한 어드모니션](admonitions.mdx)** - 눈에 띄는 콜아웃과 알림
2. **[고급 레이아웃](../advanced/themes.mdx)** - 사용자 정의 테마와 스타일링
3. **[상호작용 컴포넌트](../advanced/search.mdx)** - 동적 기능

---

*MDX는 마크다운의 단순함과 React 컴포넌트의 강력함을 결합하여 진정한 동적 문서를 만듭니다.*